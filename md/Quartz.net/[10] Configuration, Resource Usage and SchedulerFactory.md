# Lesson 10: Configuration, Resource Usage and SchedulerFactory -  配置、资源使用以及SchedulerFactory

Quartz以模块方式构架, 因此, 要使它运行, 几个组件必须很好的咬合在一起. 幸运的是, 已经有了一些现存的助手可以完成这些工作.

在Quartz进行工作之前需要被配置的组件主要有: 

- ThreadPool
- JobStore
- DataSources (如果需要)
- Scheduler

**ThreadPool(线程池)** 提供了一组用于Quartz在执行作业时使用的线程. 池中的线程数越多, 可以并发运行的作业数量就越多. 但是, 太多的线程可能会使您的系统崩溃. 大多数用户发现5个或者相近的线程就已经足够了, 因为任何给定的时间段内都不超过100个作业要运行, 而且作业通常不安排在同一时刻运行，同时任务活动时间很短(完成快速). 其他的用户发现需要10, 15, 50, 甚至100个线程. 因为每个schedules都有成千上万的触发器, 并且在给定的时刻会有平均10到100个任务在运行. 确定schedule的线程池中的线程数量的合理值取决于用scheduler来做什么, 除了尽可能少地设置线程数量, 使得任务执行时线程够用外, 没有其他实用的准则.

> 注意：如果触发器触发的时间到了, 却没有可用的线程, 那么Quartz将会让这个任务等待, 直到有线程可用. 这样,任务的执行将比它因该执行的时间晚若干毫秒. 如果scheduler的配置的“misfire threshold(未触发极限)”时限中仍然没有线程可用, 这甚至会导致“未触发(misfire)”.



